<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"/>
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <title>WinA</title>
    <link rel="stylesheet" type="text/css" href="css/api.css" />
    <link rel="stylesheet" type="text/css" href="css/box.css" />
    <script type="text/javascript" src="script/public.js"></script>
    <style>
    	p{
    		color:#999;
    		padding:5px;
    	}
    </style>
	<script type="text/javascript">
	    // 全局常量
        var sTitle = "Success:\n";
        var eTitle = "Error:\n";

	    var moduleSMSSDK = null;
		apiready = function(){
	    	moduleSMSSDK = api.require('moduleSMSSDK');
	    }
	    
		function requestVerification(){
		    var country = document.getElementById("country").value;
		    var phone = document.getElementById("phone").value;
		    var tempCode = document.getElementById("tempCode").value;
		    // param中的key命名不能改变
			var param = {country:country, phone:phone, tempCode:tempCode};
	        moduleSMSSDK.getVerificationCode(param, function(ret, err){
	            if (err !== null && err !== undefined && err !== '') {
	                // 错误消息示例：{"httpStatus":400,"error":"Template not exist.","status":484}
	                alert(eTitle + JSON.stringify(err));
	            } else {
	                // 正常消息示例：{"smart":false}
	        	    alert(sTitle + JSON.stringify(ret));
	        	}
	        });
		}

		function requestVoiceVerification(){
		    var country = document.getElementById("country").value;
		    var phone = document.getElementById("phone").value;
		    // param中的key命名不能改变
			var param = {country:country, phone:phone};
	        moduleSMSSDK.getVoiceVerifyCode(param, function(ret, err){
	            if (err !== null && err !== undefined && err !== '') {
	                // 错误消息示例：{"httpStatus":400,"error":"Template not exist.","status":484}
	                alert(eTitle + JSON.stringify(err));
	            } else {
	                // 正常消息示例：{}
	        	    alert(sTitle + JSON.stringify(ret));
	        	}
	        });
		}

		function submitVerification(){
		    var country = document.getElementById("country").value;
		    var phone = document.getElementById("phone").value;
		    var code = document.getElementById("code").value;
		    // param中的key命名不能改变
			var param = {country:country, phone:phone, code:code};
	        moduleSMSSDK.submitVerificationCode(param, function(ret, err){
	            if (err !== null && err !== undefined && err !== '') {
	                // 错误消息示例：{"httpStatus":400,"error":"Template not exist.","status":484}
	                alert(eTitle + JSON.stringify(err));
	            } else {
	                // 正常消息示例：{country=86, phone=13362206853}
	        	    alert(sTitle + JSON.stringify(ret));
	        	}
	        });
		}

	</script>
</head>
<body>
    <div id="wrap">
        <div id="main">
        	<br>
            <div class='itemtitle'>0、请先输入手机号</div>
                <lable>国家：</lable><br>
                <input type="number" id="country" value="86" /><br>
                <lable>手机号：</lable><br>
                <input type="number" id="phone" /><br>
                <lable>模板编号（没有则不填）：</lable><br>
                <input type="number" id="tempCode" /><br>
            <div class='itemtitle'>1、文本验证码</div>
                <div class="clickbtn" tapmode="active" onclick="requestVerification()" >请求文本验证码</div>
            <div class='itemtitle'>2、语音验证码</div>
                <div class="clickbtn" tapmode="active" onclick="requestVoiceVerification()" >请求语音验证码</div>
            <div class='itemtitle'>3、提交验证码</div>
                <lable>验证码：</lable><br>
                <input type="number" id="code" />
                <div class="clickbtn" tapmode="active" onclick="submitVerification()" >提交验证码</div>
            <div class='itemtitle'>2、通讯录</div>
                <div class="clickbtn" tapmode="active" onclick="requestNewFriends()" >获取新增好友数</div>
			<br>
		</div>
	</div>
</body>
</html>